---
layout: post
title: TCP/IP学习总结
date: 2021-04-14
category: summary
---

## 一、网络基础知识

#### 1.OSI参考模型中各个分层的作用（“协议”定义每一层的“作用”）

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/001.png" alt="001" style="zoom:100%;" />

■ 应用层：为应用程序提供服务并规定应用程序中通信相关的细节。包括文件传输、电子邮件、远程登录（虚拟终端）等协议。

■ 表示层：将应用处理的信息转换为适合网络传输的格式，或将来自下一层的数据转换为上层能够处理的格式。因此它主要负责数据格式的转换。具体来说，就是将设备固有的数据格式转换为网络标准传输格式。不同设备对同一比特流解释的结果可能会不同。因此，使它们保持一致是这一层的主要作用。

■ 会话层：负责建立和断开通信连接（数据流动的逻辑通路），以及数据的分割等数据传输相关的管理。

■ 传输层：起着可靠传输的作用。只在通信双方节点上进行处理，而无需在路由器上处理。

■ 网络层：将数据传输到目标地址。目标地址可以是多个网络通过路由器连接而成的某一个地址。因此这一层主要负责寻址和路由选择。

■ 数据链路层：负责物理层面上互连的、节点之间的通信传输。例如与1个以太网相连的2个节点之间的通信。将0、1序列划分为具有意义的数据帧传送给对端（数据帧的生成与接收）。

■ 物理层：负责0、1比特流（0、1序列）与电压的高低、光的闪灭之间的互换。

#### 2.传输方式分类

（1）面向有连接型与面向无连接型。

（2）电路交换与分组交换。

（3）根据接收端数量分为单播、广播（广播域）、多播和任播（DNS根域名解析服务器）。

#### 3.地址特点：

（1）唯一性（MAC地址和IP地址都具有唯一性）

（2）层次性（只有IP地址具有层次性）：IP地址实现分层的方式有两个方面，一方面IP地址由网络号和主机号两部分组成（网络号相同说明处于同一个网段），另一方面网络号相同的主机在组织结构、提供商类型和地域分布上都比较集中，方便IP寻址。

（3）MAC寻址参考地址转发表（记录实际MAC地址本身），IP寻址参考路由控制表（记录集中网络号的IP地址）。

#### 4.网络构成要素（硬件设备）

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/002.png" alt="002" style="zoom:100%;" />

（1）网络接口卡（NIC）：也叫网络适配器、网卡、LAN卡。任何一台计算机连接网络时，必须要使用网卡。

（2）中继器：位于OSI参考模型第一层。提供多个端口服务的中继器被称作中继集线器或集线器（多口中继器）。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/003.png" alt="003" style="zoom:100%;" />

（3）网桥/2层交换机：位于OSI参考模型第二层。具有识别、临时存储数据帧的功能，网桥可以通过检查数据帧中的FCS数据位的值丢弃损坏数据，此外还能通过地址自学机制（MAC地址、硬件地址、物理地址、适配器地址）和过滤功能控制网络流量。交换集线器现在基本也属于网桥的一种。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/004.png" alt="004" style="zoom:100%;" />

（4）路由器/3层交换机：位于OSI参考模型的第三层。网桥是根据物理地址（MAC地址）进行处理，而路由器/3层交换机是根据IP地址进行处理。路由器有分担网络负荷的作用，有些路由器还具备一定的网络安全功能。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/005.png" alt="005" style="zoom:100%;" />

（5）4~7层交换机：负责处理OSI参考模型中从传输层至应用层的数据。负载均衡器就是4~7层交换机的一种。4~7层交换机的重要功能之一是带宽控制，此外还有广域网加速器、特殊应用访问加速以及防火墙等应用场景。

（6）网关：是OSI参考模型中负责将从传输层到应用层的数据进行转换和转发的设备，负责协议的转换与数据的转发。在同一种类型的协议之间转发数据叫做应用网关。代理服务器（Proxy Server）是网关的一种，即应用网关。防火墙是一款通过网关通信，针对不同应用提高安全性的产品。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/006.png" alt="006" style="zoom:100%;" />

## 二、TCP/IP基础知识

#### 1.TCP/IP协议群

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/007.png" alt="007" style="zoom:100%;" />

#### 2.互联网与TCP/IP的关系

互联网通信需要相应的网络协议，TCP/IP协议群为使用互联网而开发制定，即互联网的协议就是TCP/IP，TCP/IP就是互联网的协议。

#### 3.互联网结构

互联网每个网络由骨干网和末端网组成，每个网络之间通过NOC（网络操作中心）相连，异构网络（运营商不同导致网络连接方式和使用方法不同的网络）连接需要IX（网络交换中心）的支持。

#### 4.TCP/IP分层模型

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/008.png" alt="008" style="zoom:100%;" />

OSI参考模型注重“通信协议必要的功能是什么”，TCP/IP更强调“在计算机上实现协议应该开发哪种程序”。

（1）硬件（物理层）：TCP/IP的最底层是负责数据传输的硬件。

（2）网络接口层（数据链路层）：利用以太网中的数据链路层进行通信，因此数据接口层，也相当于让NIC起作用的“驱动程序（在操作系统与硬件之间起桥梁作用的软件）”。

（3）互联网层（网络层）：互联网层使用IP协议，相当于PSI模型中的第三层网络层。IP协议基于IP地址将分组数据包发送到目的主机。IP、ICMP和ARP属于此层。

（4）传输层：最主要的功能就是让应用程序之间实现通信。两个具有代表性的协议是TCP和UDP。TCP/IP分层中的互联网层与传输层的功能通常由操作系统提供，尤其是路由器必须实现通过互联网层转发分组数据包的功能。此外，连接互联网的所有主机跟路由器都必须实现IP功能。

（5）应用层（会话层以上的分层）：TCP/IP分层将OSI参考模型中的会话层、表示层和应用层的功能都集中到了应用程序中实现。TCP/IP应用的架构绝大多数属于客户端/服务端模型。WWW中的HTTP属于OSI应用层的协议，HTML属于表示层的协议；电子邮件用到的SMTP协议属于应用层，同时扩展电子邮件格式的MIME协议属于表示层；文件传输用到的FTP协议属于应用层；远程登录的TELNET和SSH协议属于应用层；网络管理使用的SNMP属于应用层协议，而用来查看SNMP保存的信息的MIB属于表示层协议。

## 三、数据链路

#### 1.数据链路的作用

数据链路，指OSI参考模型中的数据链路层。数据链路层的协议定义了通过通信媒介互联的设备之间传输的规范。数据链路层处理的数据不是单纯的0、1序列，而是把它们集合为一个叫做“帧”的块进行传输。数据链路可以被视为网络传输中的最小单位。

#### 2.网络拓扑

网络的连接和构成的形态成为网络拓扑，包括总线型、环型、星型和网状型等，实际网络由简单的拓扑结构组合而成。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/009.png" alt="009" style="zoom:100%;" />

#### 3.数据链路相关技术

（1）MAC地址

MAC地址用于识别数据链路中互连的节点，长48比特，结构如图所示。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/010.png" alt="010" style="zoom:100%;" />

（2）共享介质型网络

从通信介质的使用方法上看，网络可分为共享介质型和非共享介质型。

共享介质型网络指由多个设备共享一个通信介质的一种网络，设备之间使用同一个载波信道进行发送和接收。共享介质型网络中有两种介质访问控制方式，一种是争用方式，另一种是令牌传递方式。

（3）非共享介质网络

对介质采取专用的一种传输控制方式，网络中的每个站直连交换机，由交换机负责转发数据帧。此方式可以根据交换机的高级特性构建虚拟局域网（VLAN）、进行流量控制等，但致命弱点是一旦交换机发生故障，与之相连的所有计算机之间都无法通信。

（4）根据MAC地址转发

以太网交换机（交换集线器），是一种持有多个端口的网桥，它参考转发表，根据数据链路层中每个帧的目标MAC地址，决定从哪个网络接口发送数据。这种转发表是自动生成的，原理如图所示。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/011.png" alt="011" style="zoom:100%;" />

交换机有存储转发和直通转发两种转发方式。存储转发检查以太网数据帧末尾的FCS位，避免错误帧。直通转发不接收整个帧，得知目标后即可开始转发，具有延迟较短的优势，但不可避免发送错误帧的可能性。

（5）环路检测技术

通过网桥链接网络时，如果出现环路，最坏的情况下会导致数据帧持续转发致使网络瘫痪，解决此问题，具体有生成树和源路由两种方式。

生成树方式规定每个网桥必须在每1~10秒内相互交换BPDU包，从而判断哪些端口使用哪些不使用，以便消除环路。

源路由法可以判断发送数据的源地址是通过哪个网桥实现传输的，并将帧写入RIF，网桥根据RIF信息发送帧给目标地址，在这种机制中发送端本身必须具备源路由功能。

（6）VLAN

采用带有VLAN技术的网桥，可以切断所有VLAN之间的所有通信，VLAN可以过滤多余的包，提高网络的承载效率。

如图所示，该交换机按照其端口区分了多个网段，从而区分了广播数据传播的范围、减少了网络负载并提高了网络的安全性。然而异构的两个网段之间，就需要利用具有路由功能的交换机（如三层交换机），或在各段中间通过路由器的连接才能实现通信。

<img src="https://github.com/littleO-range/littleO-range.github.io/raw/master/_summaryimage/012.png" alt="012" style="zoom:100%;" />

#### 4.以太网

#### 5.无线通信

#### 6.PPP

#### 7.其他数据链路

#### 8.公共网络



## 四、IP协议

## 五、IP协议相关技术

## 六、TCP与UDP

## 七、路由协议

## 八、应用协议

## 九、网络安全